<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>ChapÃ©u Seletor â€“ AniversÃ¡rio de 18 anos</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: #2e3d49;
      color: #f5e8c7;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      position: relative;
    }
    .container {
      background: #3b4a57;
      border: 3px solid #d4af37;
      border-radius: 8px;
      padding: 20px;
      width: 360px;
      text-align: center;
    }
    h1 { font-size: 1.6rem; margin-bottom: 10px; }
    .question { margin: 20px 0; font-size: 1.1rem; }
    .choices { list-style: none; margin-bottom: 20px; text-align: left; }
    .choices li { margin: 8px 0; }
    .choices button {
      width: 100%; padding: 8px;
      background: #556b78; border: 2px solid #d4af37;
      border-radius: 4px; color: #f5e8c7;
      cursor: pointer; font-size: 0.95rem;
    }
    .choices button:hover { background: #6d8392; }
    #nextBtn, #restartBtn {
      padding: 8px 16px; background: #d4af37;
      border: none; border-radius: 4px;
      color: #2e3d49; font-weight: bold;
      cursor: pointer; font-size: 1rem;
    }
    #resultBlock h2 { margin-bottom: 10px; color: #d4af37; }
    #resultBlock p { font-size: 1rem; line-height: 1.4; }
    #houseImg {
      display: block; margin: 15px auto;
      width: 120px; height: auto;
    }
    #muteBtn {
      position: absolute; top: 20px; right: 20px;
      background: transparent; border: none;
      color: #f5e8c7; font-size: 1.4rem;
      cursor: pointer;
    }
    /* iframe escondido para playback */
    #audioFrame { display: none; }
  </style>
</head>
<body>

  <!-- Embed YouTube para tocar Hedwig's Theme em loop -->
  <iframe
    id="audioFrame"
    src="https://www.youtube.com/embed/wtHra9tFISY?autoplay=1&loop=1&playlist=wtHra9tFISY&controls=0"
    allow="autoplay"
  ></iframe>
  <button id="muteBtn">ðŸ”Š</button>

  <div class="container" id="quizContainer">
    <h1>ChapÃ©u Seletor</h1>

    <div id="questionBlock">
      <div class="question" id="question">Pergunta</div>
      <ul class="choices" id="choices"></ul>
      <button id="nextBtn" disabled>PrÃ³xima</button>
    </div>

    <div id="resultBlock" style="display:none">
      <h2 id="houseResult"></h2>
      <img id="houseImg" src="" alt="Escudo da Casa" />
      <p id="birthdayMsg"></p>
      <button id="restartBtn">Refazer SeleÃ§Ã£o</button>
    </div>
  </div>

  <script>
    const questions = [
      { q: "Qual desses animais vocÃª mais gosta?",
        choices: ["Coruja","Rato","Cavalo","LeÃ£o"],
        houses: ["Corvinal","Sonserina","Lufa-Lufa","GrifinÃ³ria"] },
      { q: "Qual qualidade vocÃª valoriza mais?",
        choices: ["Coragem","Lealdade","InteligÃªncia","AmbiÃ§Ã£o"],
        houses: ["GrifinÃ³ria","Lufa-Lufa","Corvinal","Sonserina"] },
      { q: "Onde vocÃª passaria mais tempo?",
        choices: ["Sala comum da GrifinÃ³ria","Torre da Corvinal",
                  "PorÃ£o da Sonserina","Cozinhas da Lufa-Lufa"],
        houses: ["GrifinÃ³ria","Corvinal","Sonserina","Lufa-Lufa"] },
      { q: "Qual feitiÃ§o Ã© seu favorito?",
        choices: ["Expelliarmus","Wingardium Leviosa","Protego","Reparo"],
        houses: ["GrifinÃ³ria","Corvinal","Sonserina","Lufa-Lufa"] },
      { q: "Qual cor combina mais com vocÃª?",
        choices: ["Vermelho","Azul","Verde","Amarelo"],
        houses: ["GrifinÃ³ria","Corvinal","Sonserina","Lufa-Lufa"] }
    ];

    let current = 0;
    const tally = {
      "GrifinÃ³ria": 0,
      "Corvinal":   0,
      "Sonserina":  0,
      "Lufa-Lufa":  0
    };

    const questionEl   = document.getElementById("question");
    const choicesEl    = document.getElementById("choices");
    const nextBtn      = document.getElementById("nextBtn");
    const resultBlock  = document.getElementById("resultBlock");
    const questionBlk  = document.getElementById("questionBlock");
    const houseRes     = document.getElementById("houseResult");
    const birthdayMsg  = document.getElementById("birthdayMsg");
    const houseImg     = document.getElementById("houseImg");
    const audioFrame   = document.getElementById("audioFrame");
    const muteBtn      = document.getElementById("muteBtn");

    const birthdayByHouse = {
      "GrifinÃ³ria": "Que a coragem de GrifinÃ³ria te inspire em cada novo desafio!",
      "Corvinal":   "Que a sabedoria de Corvinal ilumine seus melhores dias!",
      "Sonserina":  "Que a ambiÃ§Ã£o de Sonserina te leve mais longe!",
      "Lufa-Lufa":  "Que a lealdade de Lufa-Lufa fortaleÃ§a todos os seus laÃ§os!"
    };

    const imageByHouse = {
      "GrifinÃ³ria": "https://upload.wikimedia.org/wikipedia/commons/5/5f/Gryffindor_House_Crest.png",
      "Corvinal":   "https://upload.wikimedia.org/wikipedia/commons/e/ec/Ravenclaw_House_Crest.png",
      "Sonserina":  "https://upload.wikimedia.org/wikipedia/commons/3/33/Slytherin_House_Crest.png",
      "Lufa-Lufa":  "https://upload.wikimedia.org/wikipedia/commons/9/9f/Hufflepuff_House_Crest.png"
    };

    function loadQuestion() {
      nextBtn.disabled = true;
      const { q, choices } = questions[current];
      questionEl.textContent = q;
      choicesEl.innerHTML = "";
      choices.forEach((txt, i) => {
        const btn = document.createElement("button");
        btn.textContent = txt;
        btn.onclick = () => selectAnswer(i);
        const li = document.createElement("li");
        li.appendChild(btn);
        choicesEl.appendChild(li);
      });
    }

    function selectAnswer(idx) {
      const btns = choicesEl.querySelectorAll("button");
      btns.forEach(b => b.disabled = true);
      const house = questions[current].houses[idx];
      tally[house]++;
      btns[idx].style.borderColor = "#d4af37";
      nextBtn.disabled = false;
    }

    nextBtn.onclick = () => {
      current++;
      current < questions.length ? loadQuestion() : showResult();
    };

    function showResult() {
      questionBlk.style.display = "none";
      resultBlock.style.display = "block";
      const maxScore = Math.max(...Object.values(tally));
      const winners = Object.keys(tally).filter(h => tally[h] === maxScore);
      const finalHouse = winners[Math.floor(Math.random() * winners.length)];

      houseRes.textContent    = `ParabÃ©ns! Seja bem-vinda Ã  ${finalHouse}!`;
      birthdayMsg.textContent = birthdayByHouse[finalHouse];
      houseImg.src            = imageByHouse[finalHouse];
      houseImg.alt            = `Escudo de ${finalHouse}`;
    }

    document.getElementById("restartBtn").onclick = () => {
      current = 0;
      Object.keys(tally).forEach(h => tally[h] = 0);
      resultBlock.style.display = "none";
      questionBlk.style.display = "block";
      loadQuestion();
    };

    // inicia quiz e configura controle de Ã¡udio
    loadQuestion();
    let muted = false;
    muteBtn.onclick = () => {
      muted = !muted;
      // recarrega iframe com ou sem mute
      audioFrame.src = 
        `https://www.youtube.com/embed/wtHra9tFISY` +
        `?autoplay=1&loop=1&playlist=wtHra9tFISY&controls=0` +
        (muted ? `&mute=1` : ``);
      muteBtn.textContent = muted ? "ðŸ”‡" : "ðŸ”Š";
    };
  </script>
</body>
</html>
